# ì½”ë“œ ë¦¬ë·°: ìë™í™” ì‹œìŠ¤í…œ ì™„ì „ ë¶„ì„

#technical #ì½”ë“œë¦¬ë·° #ìœ„í—˜ë¶„ì„

**ì‘ì„±ì¼:** 2026-02-06
**ëª©ì :** ìë™ ì—…ë¡œë“œ ì‚¬ê³  ë°©ì§€ë¥¼ ìœ„í•œ ì½”ë“œ ì™„ì „ ë¶„ì„

---

## 1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 1.1 íŒŒì¼ ì˜ì¡´ì„± êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        auto_crawl.py                            â”‚
â”‚                    (ìŠ¤ì¼€ì¤„ëŸ¬ - ì§„ì…ì )                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ import
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     franchise_sync.py                           â”‚
â”‚                   (í•µì‹¬ ì—”ì§„ - 4ë‹¨ê³„ ì²˜ë¦¬)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ aladin_api_   â”‚ â”‚ coupang_wing_ â”‚ â”‚ coupang_api_uploader.py     â”‚
â”‚ crawler.py    â”‚ â”‚ client.py     â”‚ â”‚ (ìƒí’ˆ ë“±ë¡ í˜ì´ë¡œë“œ ìƒì„±)      â”‚
â”‚ (ë„ì„œ í¬ë¡¤ë§)  â”‚ â”‚ (API í†µì‹ )    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
                          â”‚                        â”‚ import
                          â–¼                        â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚               constants.py                    â”‚
                  â”‚         (ê¸°ë³¸ê°’: ë°°ì†¡ë¹„, ìˆ˜ìˆ˜ë£Œ ë“±)              â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ë°ì´í„° íë¦„ ì „ì²´ ë„ì‹

```
[ì•Œë¼ë”˜ API] â”€â”€GETâ”€â”€â–¶ [Book í…Œì´ë¸”] â”€â”€ë¶„ì„â”€â”€â–¶ [Product í…Œì´ë¸”]
                           â”‚                        â”‚
                           â”‚                        â”‚ ê°­ ë¶„ì„
                           â–¼                        â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         5ê°œ ì¿ íŒ¡ ê³„ì • ë¹„êµ            â”‚
                    â”‚  007-book, 007-bm, 007-ez,          â”‚
                    â”‚  002-bm, big6ceo                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     ë¯¸ë“±ë¡ ìƒí’ˆ ëª©ë¡ (ê°­)             â”‚
                    â”‚   = Product - Listing               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚                       â”‚
                          â–¼                       â–¼
                    [ìˆ˜ë™ ë“±ë¡]              [ìë™ ë“±ë¡] âŒ
                    (ëŒ€ì‹œë³´ë“œ)               (ë¹„í™œì„±í™”ë¨)
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ ì¿ íŒ¡ WING API â”‚
                  â”‚  POST ìš”ì²­    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Listing í…Œì´ë¸” â”‚
                  â”‚  (ë“±ë¡ ê¸°ë¡)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. auto_crawl.py ì™„ì „ ë¶„ì„

### 2.1 íŒŒì¼ ì •ë³´
- **ê²½ë¡œ**: `scripts/auto_crawl.py`
- **ì¤„ ìˆ˜**: 259ì¤„
- **ì—­í• **: ë§¤ì¼ ìƒˆë²½ 3ì‹œ ìë™ ì‹¤í–‰ ìŠ¤ì¼€ì¤„ëŸ¬

### 2.2 ì „ì—­ ì„¤ì • (46-51ì¤„)

```python
# â”€â”€â”€ ì„¤ì • â”€â”€â”€
CRAWL_HOUR = 3          # ê¸°ë³¸ ì‹¤í–‰ ì‹œê° (ìƒˆë²½ 3ì‹œ)
MAX_PER_PUBLISHER = 50   # ì¶œíŒì‚¬ë‹¹ ìµœëŒ€ ê²€ìƒ‰ ìˆ˜
YEAR_FILTER = 2025       # 2025ë…„ ì´í›„ ë„ì„œë§Œ
CHECK_INTERVAL = 30      # ì‹œê°„ ì²´í¬ ê°„ê²© (ì´ˆ)
DB_TIMEOUT = 30          # SQLite timeout (ëŒ€ì‹œë³´ë“œ ë™ì‹œ ì ‘ê·¼ ëŒ€ë¹„)
```

**ì„¤ì •ê°’ ì˜ë¯¸:**
```
CRAWL_HOUR = 3
    â””â”€â–¶ ë§¤ì¼ ìƒˆë²½ 3ì‹œì— run_crawl() ì‹¤í–‰

MAX_PER_PUBLISHER = 50
    â””â”€â–¶ ì¶œíŒì‚¬ 1ê°œë‹¹ ì•Œë¼ë”˜ì—ì„œ ìµœëŒ€ 50ê¶Œ ê²€ìƒ‰
    â””â”€â–¶ 24ê°œ ì¶œíŒì‚¬ Ã— 50ê¶Œ = ìµœëŒ€ 1,200ê¶Œ/ì¼

YEAR_FILTER = 2025
    â””â”€â–¶ ì¶œê°„ë…„ë„ 2025ë…„ ì´ìƒë§Œ ìˆ˜ì§‘
    â””â”€â–¶ êµ¬ê°„ ë„ì„œ ì œì™¸

DB_TIMEOUT = 30
    â””â”€â–¶ SQLite ì ê¸ˆ ëŒ€ê¸° ì‹œê°„ (ëŒ€ì‹œë³´ë“œì™€ ë™ì‹œ ì‹¤í–‰ ì‹œ)
```

### 2.3 run_crawl() í•¨ìˆ˜ - ë©”ì¸ ë¡œì§ (75-192ì¤„)

```python
def run_crawl():
    """í¬ë¡¤ë§ + ë§ˆì§„ ë¶„ì„ ì‹¤í–‰"""
    # DB ì—°ê²° ì„¤ì •
    db_url = settings.database_url
    connect_args = {"check_same_thread": False, "timeout": DB_TIMEOUT}
    engine = create_engine(db_url, connect_args=connect_args)
    Session = sessionmaker(bind=engine)
    db = Session()

    # FranchiseSync ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    sync = FranchiseSync(db=db)
```

**DB ì—°ê²° íë¦„:**
```
settings.database_url â”€â”€â–¶ "sqlite:///coupang_auto.db"
         â”‚
         â–¼
    create_engine()
         â”‚
         â–¼
    sessionmaker()
         â”‚
         â–¼
    Session() â”€â”€â–¶ db ê°ì²´
         â”‚
         â–¼
    FranchiseSync(db=db)
```

### 2.4 Step 1: í¬ë¡¤ë§ (101-110ì¤„)

```python
# Step 1: ì¶œíŒì‚¬ë³„ í‚¤ì›Œë“œ ê²€ìƒ‰ í¬ë¡¤ë§
logger.info("[1/5] ì¶œíŒì‚¬ë³„ í¬ë¡¤ë§ (year_filter=%d, max=%d/ì¶œíŒì‚¬)",
            YEAR_FILTER, MAX_PER_PUBLISHER)
crawl_result = sync.crawl_by_publisher(
    max_per_publisher=MAX_PER_PUBLISHER,  # 50
    year_filter=YEAR_FILTER,               # 2025
)
logger.info(
    "í¬ë¡¤ë§ ê²°ê³¼: ê²€ìƒ‰ %dê°œ, ì‹ ê·œ %dê°œ, ìŠ¤í‚µ %dê°œ",
    crawl_result["searched"], crawl_result["new"], crawl_result["skipped"]
)
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sync.crawl_by_publisher(max=50, year_filter=2025)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                       â–¼                       â–¼
[ê°œë…ì›ë¦¬ ê²€ìƒ‰]        [ë¹„ìƒêµìœ¡ ê²€ìƒ‰]          [ì¢‹ì€ì±…ì‹ ì‚¬ê³  ê²€ìƒ‰]
     â”‚                       â”‚                       â”‚
     â–¼                       â–¼                       â–¼
  50ê¶Œ ì¡°íšŒ               50ê¶Œ ì¡°íšŒ               50ê¶Œ ì¡°íšŒ
     â”‚                       â”‚                       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ì¤‘ë³µ ì œê±°       â”‚
                    â”‚  ISBN ì²´í¬      â”‚
                    â”‚  DB ì €ì¥        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              crawl_result = {
                  "searched": 1200,  # ì „ì²´ ê²€ìƒ‰ ìˆ˜
                  "new": 50,         # ì‹ ê·œ ì €ì¥ ìˆ˜
                  "skipped": 1150,   # ì´ë¯¸ ìˆê±°ë‚˜ ìŠ¤í‚µ
                  "books": [Book, Book, ...]
              }
```

### 2.5 Step 2: ë§ˆì§„ ë¶„ì„ (112-118ì¤„)

```python
# Step 2: ë§ˆì§„ ë¶„ì„ + Product ìƒì„±
logger.info("[2/5] ë§ˆì§„ ë¶„ì„...")
analyze_result = sync.analyze_products(crawl_result["books"])
logger.info(
    "ë¶„ì„ ê²°ê³¼: %dê°œ Product ìƒì„±, ë¬¶ìŒí•„ìš” %dê°œ",
    analyze_result["created"], analyze_result["bundle_needed"]
)
```

**ë§ˆì§„ ê³„ì‚° ê³µì‹:**
```
ì •ê°€ (list_price)
    â”‚
    â–¼
íŒë§¤ê°€ = ì •ê°€ Ã— 0.9  (ë„ì„œì •ê°€ì œ)
    â”‚
    â–¼
ë§¤ì…ê°€ = ì •ê°€ Ã— ë§¤ì…ìœ¨  (ì¶œíŒì‚¬ë³„ ìƒì´, ë³´í†µ 0.65~0.75)
    â”‚
    â–¼
ì¿ íŒ¡ìˆ˜ìˆ˜ë£Œ = íŒë§¤ê°€ Ã— 0.11
    â”‚
    â–¼
ìˆœë§ˆì§„ = íŒë§¤ê°€ - ë§¤ì…ê°€ - ì¿ íŒ¡ìˆ˜ìˆ˜ë£Œ - ë°°ì†¡ë¹„(2,500)
    â”‚
    â”œâ”€â–¶ ìˆœë§ˆì§„ > 2,000ì› â†’ shipping_policy = "free" (ë¬´ë£Œë°°ì†¡ ê°€ëŠ¥)
    â”‚
    â””â”€â–¶ ìˆœë§ˆì§„ â‰¤ 2,000ì› â†’ shipping_policy = "paid" (ìœ ë£Œë°°ì†¡)
```

**Product ìƒì„± íë¦„:**
```
Book (50ê¶Œ ì‹ ê·œ)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Product.create_from_book(book)     â”‚
â”‚                                     â”‚
â”‚  - sale_price ê³„ì‚°                  â”‚
â”‚  - net_margin ê³„ì‚°                  â”‚
â”‚  - shipping_policy ê²°ì •             â”‚
â”‚  - can_upload_single í”Œë˜ê·¸ ì„¤ì •     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                           â–¼
can_upload_single = True    can_upload_single = False
(ë‹¨ê¶Œ ë“±ë¡ ê°€ëŠ¥)              (ë¬¶ìŒ í•„ìš”)
    â”‚                           â”‚
    â–¼                           â–¼
ë§ˆì§„ OK                      ë§ˆì§„ ë¶€ì¡±
status = 'ready'             status = 'bundle_needed'
```

### 2.6 Step 3: ê°­ ë¶„ì„ (120-124ì¤„)

```python
# Step 3: ê°­ ë¶„ì„ (ê³„ì •ë³„ ë¯¸ë“±ë¡ ë„ì„œ)
logger.info("[3/5] ê°­ ë¶„ì„...")
gaps = sync.find_gaps()
total_missing = sum(g["missing"] for g in gaps.values())
logger.info("ê°­ ë¶„ì„: %dê°œ ê³„ì •, ì´ ë¯¸ë“±ë¡ %dê°œ", len(gaps), total_missing)
```

**ê°­ ë¶„ì„ ë¡œì§:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì „ì²´ Product (status='ready')                â”‚
â”‚                         ì˜ˆ: 1,000ê¶Œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                     â–¼                     â–¼
   007-book               007-bm                007-ez
   Listing ì¡°íšŒ          Listing ì¡°íšŒ           Listing ì¡°íšŒ
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
   ë“±ë¡ëœ ISBN:           ë“±ë¡ëœ ISBN:          ë“±ë¡ëœ ISBN:
   800ê°œ                  750ê°œ                 600ê°œ
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
   ë¯¸ë“±ë¡(ê°­):            ë¯¸ë“±ë¡(ê°­):           ë¯¸ë“±ë¡(ê°­):
   200ê°œ                  250ê°œ                 400ê°œ
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                gaps = {
                    "007-book": {"missing": 200, "products": [...]},
                    "007-bm": {"missing": 250, "products": [...]},
                    "007-ez": {"missing": 400, "products": [...]},
                }
```

### 2.7 Step 4: ìë™ ë“±ë¡ (126-131ì¤„) âš ï¸ ë¹„í™œì„±í™”ë¨

```python
# Step 4: ìë™ ë“±ë¡ ë¹„í™œì„±í™” (2026-02-06)
# âš ï¸ ìë™ ì—…ë¡œë“œ ê¸°ëŠ¥ ì œê±° - ìˆ˜ë™ ê²€í†  í›„ ë“±ë¡ í•„ìš”
upload_results = {}
total_uploaded = 0
total_failed = 0
logger.info("[4/5] ìë™ ë“±ë¡ ë¹„í™œì„±í™”ë¨ â€” ìˆ˜ë™ ê²€í†  í•„ìš” (ë¯¸ë“±ë¡ %dê°œ)", total_missing)
```

**ì´ì „ ì½”ë“œ (ì‚­ì œë¨):**
```python
# âŒ ì´ ì½”ë“œê°€ ì‚¬ê³ ë¥¼ ì¼ìœ¼í‚´ - í˜„ì¬ ì‚­ì œë¨
if total_missing > 0:
    for acc_name, gap_info in gaps.items():
        result = sync.upload_to_account(
            account=gap_info["account"],
            products=gap_info["products"],
            dry_run=False,  # â† ì‹¤ì œ ë“±ë¡!
        )
```

**ë¹„í™œì„±í™” í›„ íë¦„:**
```
Step 3 (ê°­ ë¶„ì„)
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¯¸ë“±ë¡ 200ê°œ ë°œê²¬                   â”‚
â”‚                                     â”‚
â”‚  â†’ ë¡œê·¸ë§Œ ë‚¨ê¸°ê³  ì¢…ë£Œ               â”‚
â”‚  â†’ ì‹¤ì œ ë“±ë¡ ì—†ìŒ                   â”‚
â”‚  â†’ ìˆ˜ë™ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸ í•„ìš”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
Step 5 (ì¬ê³  ë™ê¸°í™”)
```

### 2.8 Step 5: ì¬ê³  ë™ê¸°í™” (133-149ì¤„)

```python
# Step 5: ê°€ê²©/ì¬ê³  ë™ê¸°í™”
inv_result = {"price_updated": 0, "stock_refilled": 0, "errors": 0}
try:
    from scripts.sync_inventory import InventorySync
    logger.info("[5/5] ê°€ê²©/ì¬ê³  ë™ê¸°í™”...")
    inv_syncer = InventorySync(db_path=str(project_root / "coupang_auto.db"))
    inv_results = inv_syncer.sync_all()
    inv_result["price_updated"] = sum(r["price_updated"] for r in inv_results)
    inv_result["stock_refilled"] = sum(r["stock_refilled"] for r in inv_results)
```

**ì¬ê³  ë™ê¸°í™” íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Listing í…Œì´ë¸” ì¡°íšŒ                         â”‚
â”‚                    (coupang_status = 'active')                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê°€ê²© ì°¨ì´ ì²´í¬   â”‚ â”‚ ì¬ê³  ë¶€ì¡± ì²´í¬   â”‚ â”‚ ìƒíƒœ ì²´í¬       â”‚
â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚
â”‚ sale_price !=   â”‚ â”‚ stock < 3      â”‚ â”‚ íŒë§¤ì¤‘ì§€ ì—¬ë¶€   â”‚
â”‚ coupang_price   â”‚ â”‚                 â”‚ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
         â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WING API        â”‚ â”‚ WING API        â”‚
â”‚ update_inventoryâ”‚ â”‚ update_inventoryâ”‚
â”‚ (ê°€ê²© ìˆ˜ì •)      â”‚ â”‚ (ì¬ê³  ë¦¬í•„)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.9 run_daemon() - ìŠ¤ì¼€ì¤„ëŸ¬ (195-226ì¤„)

```python
def run_daemon(crawl_hour: int):
    """ë°ëª¬ ëª¨ë“œ: ë§¤ì¼ ì§€ì • ì‹œê°ì— í¬ë¡¤ë§ ì‹¤í–‰"""
    logger.info("ìë™ í¬ë¡¤ë§ ë°ëª¬ ì‹œì‘ (ë§¤ì¼ %02d:00 ì‹¤í–‰)", crawl_hour)

    ran_today = False

    while True:  # ë¬´í•œ ë£¨í”„
        now = datetime.now()

        if now.hour == crawl_hour and not ran_today:
            logger.info("ìŠ¤ì¼€ì¤„ ì‹œê° ë„ë‹¬ â€” í¬ë¡¤ë§ ì‹œì‘")
            run_crawl()  # â† ë©”ì¸ ë¡œì§ ì‹¤í–‰
            ran_today = True

            # ë‹¤ìŒ ë‚ ê¹Œì§€ ëŒ€ê¸° ì‹œê°„ ê³„ì‚°
            tomorrow = (now + timedelta(days=1)).replace(
                hour=crawl_hour, minute=0, second=0
            )
            wait_seconds = (tomorrow - datetime.now()).total_seconds()
            time.sleep(max(wait_seconds, 60))
            ran_today = False
        else:
            if now.hour != crawl_hour:
                ran_today = False
            time.sleep(CHECK_INTERVAL)  # 30ì´ˆë§ˆë‹¤ ì²´í¬
```

**ìŠ¤ì¼€ì¤„ëŸ¬ ë™ì‘ ë„ì‹:**
```
í”„ë¡œê·¸ë¨ ì‹œì‘ (ë¶€íŒ… ì‹œ ìë™)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          while True: (ë¬´í•œë£¨í”„)       â”‚
â”‚                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚  í˜„ì¬ ì‹œê° == 3ì‹œ?            â”‚  â”‚
â”‚    â”‚  AND                         â”‚  â”‚
â”‚    â”‚  ì˜¤ëŠ˜ ì•„ì§ ì•ˆ ëŒì•˜ìŒ?         â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚         â–¼                 â–¼         â”‚
â”‚       [YES]             [NO]        â”‚
â”‚         â”‚                 â”‚         â”‚
â”‚         â–¼                 â–¼         â”‚
â”‚    run_crawl()      sleep(30ì´ˆ)     â”‚
â”‚         â”‚                 â”‚         â”‚
â”‚         â–¼                 â”‚         â”‚
â”‚    ran_today=True         â”‚         â”‚
â”‚         â”‚                 â”‚         â”‚
â”‚         â–¼                 â”‚         â”‚
â”‚    ë‹¤ìŒë‚  3ì‹œê¹Œì§€         â”‚         â”‚
â”‚    sleep()               â”‚         â”‚
â”‚         â”‚                 â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                  â”‚                  â”‚
â”‚                  â–¼                  â”‚
â”‚            ë£¨í”„ ë°˜ë³µ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. franchise_sync.py ì™„ì „ ë¶„ì„

### 3.1 íŒŒì¼ ì •ë³´
- **ê²½ë¡œ**: `scripts/franchise_sync.py`
- **ì¤„ ìˆ˜**: 707ì¤„
- **ì—­í• **: í•µì‹¬ ë™ê¸°í™” ì—”ì§„ (í¬ë¡¤ë§, ë¶„ì„, ê°­, ì—…ë¡œë“œ)

### 3.2 í´ë˜ìŠ¤ êµ¬ì¡°

```
class FranchiseSync:
    â”‚
    â”œâ”€â”€ __init__(db=None)           # ì´ˆê¸°í™”
    â”œâ”€â”€ close()                      # DB ì—°ê²° ì¢…ë£Œ
    â”‚
    â”œâ”€â”€ crawl_new_releases()         # Step 1-A: ì‹ ê°„ í¬ë¡¤ë§
    â”œâ”€â”€ crawl_by_publisher()         # Step 1-B: ì¶œíŒì‚¬ë³„ í¬ë¡¤ë§
    â”‚
    â”œâ”€â”€ analyze_products()           # Step 2: ë§ˆì§„ ë¶„ì„
    â”‚
    â”œâ”€â”€ find_gaps()                  # Step 3: ê°­ ë¶„ì„
    â”‚
    â”œâ”€â”€ upload_to_account() ğŸ”´       # Step 4: ê³„ì •ë³„ ì—…ë¡œë“œ (ìœ„í—˜!)
    â”‚
    â”œâ”€â”€ sync_all() ğŸ”´                # ì „ì²´ ë™ê¸°í™” (ìœ„í—˜!)
    â”‚
    â””â”€â”€ _create_wing_client()        # ìœ í‹¸: API í´ë¼ì´ì–¸íŠ¸ ìƒì„±
```

### 3.3 crawl_by_publisher() ìƒì„¸ (180-302ì¤„)

```python
def crawl_by_publisher(
    self,
    max_per_publisher: int = 20,
    publisher_names: List[str] = None,
    progress_callback=None,
    year_filter: int = None,
) -> Dict[str, Any]:
```

**íŒŒë¼ë¯¸í„° ì„¤ëª…:**
```
max_per_publisher: int = 20
    â”‚
    â””â”€â–¶ ì¶œíŒì‚¬ 1ê°œë‹¹ ìµœëŒ€ ê²€ìƒ‰ ìˆ˜
        auto_crawl.pyì—ì„œëŠ” 50ìœ¼ë¡œ í˜¸ì¶œ

publisher_names: List[str] = None
    â”‚
    â””â”€â–¶ Noneì´ë©´ ì „ì²´ í™œì„± ì¶œíŒì‚¬
        íŠ¹ì • ì¶œíŒì‚¬ë§Œ ì›í•˜ë©´ ["ê°œë…ì›ë¦¬", "ë¹„ìƒêµìœ¡"] í˜•ì‹

year_filter: int = None
    â”‚
    â””â”€â–¶ ì¶œê°„ë…„ë„ í•„í„°
        2025 â†’ 2025ë…„ ì´í›„ë§Œ
```

**í•µì‹¬ ë¡œì§:**
```python
# í™œì„± ì¶œíŒì‚¬ ì¡°íšŒ
publishers = self.db.query(Publisher).filter(Publisher.is_active == True).all()
pub_map = {p.name: p for p in publishers}

# ì•Œë¼ë”˜ í¬ë¡¤ëŸ¬ ìƒì„±
crawler = AladinAPICrawler(ttb_key=self.ttb_key)

for idx, pub_name in enumerate(target_names):
    # ì¶œíŒì‚¬ ì´ë¦„ + ë³„ì¹­ìœ¼ë¡œ ê²€ìƒ‰
    search_names = AladinAPICrawler.get_search_names(pub_name)
    # ì˜ˆ: "ì”¨í†¡" â†’ ["ì”¨í†¡", "ì”¨ì•¤í†¡"]

    for sname in search_names:
        batch = crawler.search_by_keyword(
            sname,
            max_results=max_per_publisher,
            sort="PublishTime",
            year_filter=year_filter,
        )
        results.extend(batch)
```

**ìƒì„¸ íë¦„ë„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   crawl_by_publisher() ì‹œì‘                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DBì—ì„œ í™œì„± ì¶œíŒì‚¬ ì¡°íšŒ                                         â”‚
â”‚  publishers = query(Publisher).filter(is_active==True)          â”‚
â”‚                                                                 â”‚
â”‚  ê²°ê³¼: 24ê°œ ì¶œíŒì‚¬                                               â”‚
â”‚  - ê°œë…ì›ë¦¬, ë¹„ìƒêµìœ¡, ì¢‹ì€ì±…ì‹ ì‚¬ê³ , ë””ë”¤ëŒ, ì´íˆ¬ìŠ¤...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê° ì¶œíŒì‚¬ë³„ ë£¨í”„ ì‹œì‘                                           â”‚
â”‚  for pub_name in target_names:                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  "ê°œë…ì›ë¦¬" ê²€ìƒ‰ â”‚  â”‚  "ë¹„ìƒêµìœ¡" ê²€ìƒ‰ â”‚  â”‚  "ì¢‹ì€ì±…" ê²€ìƒ‰   â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ get_search_namesâ”‚  â”‚ get_search_namesâ”‚  â”‚ get_search_namesâ”‚
â”‚ â†’ ["ê°œë…ì›ë¦¬"]  â”‚  â”‚ â†’ ["ë¹„ìƒêµìœ¡"]  â”‚  â”‚ â†’ ["ì¢‹ì€ì±…",    â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚    "ì¢‹ì€ì±…ì‹ ì‚¬ê³ "]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì•Œë¼ë”˜ API í˜¸ì¶œ  â”‚  â”‚ ì•Œë¼ë”˜ API í˜¸ì¶œ  â”‚  â”‚ ì•Œë¼ë”˜ API í˜¸ì¶œ  â”‚
â”‚ search_by_keywordâ”‚  â”‚ search_by_keywordâ”‚  â”‚ search_by_keywordâ”‚
â”‚ max=50          â”‚  â”‚ max=50          â”‚  â”‚ max=50 Ã— 2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê²°ê³¼ 50ê¶Œ        â”‚  â”‚ ê²°ê³¼ 50ê¶Œ        â”‚  â”‚ ê²°ê³¼ 100ê¶Œ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê° ë„ì„œì— ëŒ€í•´:                                                 â”‚
â”‚                                                                 â”‚
â”‚  1. ì¶œíŒì‚¬ ë§¤ì¹­ í™•ì¸                                             â”‚
â”‚     if not match_publisher_name(item["publisher"], pub_name):   â”‚
â”‚         continue                                                â”‚
â”‚                                                                 â”‚
â”‚  2. ISBN ìœ íš¨ì„± ì²´í¬                                             â”‚
â”‚     if not isbn: continue                                       â”‚
â”‚                                                                 â”‚
â”‚  3. ë°°ì¹˜ ë‚´ ì¤‘ë³µ ì²´í¬                                            â”‚
â”‚     if isbn in seen_isbns: continue                             â”‚
â”‚                                                                 â”‚
â”‚  4. DB ì¤‘ë³µ ì²´í¬                                                 â”‚
â”‚     existing = query(Book).filter(isbn==isbn).first()           â”‚
â”‚     if existing: continue                                       â”‚
â”‚                                                                 â”‚
â”‚  5. Book ë ˆì½”ë“œ ìƒì„± ë° ì €ì¥                                     â”‚
â”‚     book = Book(isbn=isbn, title=..., ...)                      â”‚
â”‚     db.add(book)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  db.commit()                                                    â”‚
â”‚  time.sleep(1)  # API ë¶€í•˜ ë°©ì§€                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    ë‹¤ìŒ ì¶œíŒì‚¬ë¡œ ë£¨í”„
```

### 3.4 analyze_products() ìƒì„¸ (308-358ì¤„)

```python
def analyze_products(self, books: List[Book] = None) -> Dict[str, Any]:
    """ë¯¸ì²˜ë¦¬ Book â†’ ë§ˆì§„ ë¶„ì„ â†’ Product ìƒì„±"""

    if books is None:
        # ì¸ì ì—†ìœ¼ë©´ ë¯¸ì²˜ë¦¬ ë„ì„œ ì „ì²´ ì¡°íšŒ
        books = self.db.query(Book).filter(Book.is_processed == False).all()

    for book in books:
        # ì¶œíŒì‚¬ ì •ë³´ ì¡°íšŒ
        publisher = book.publisher
        if not publisher:
            publisher = self.db.query(Publisher).filter(
                Publisher.id == book.publisher_id
            ).first()

        # ì´ë¯¸ Product ìˆìœ¼ë©´ ìŠ¤í‚µ
        existing = self.db.query(Product).filter(Product.isbn == book.isbn).first()
        if existing:
            book.is_processed = True
            continue

        # Product ìƒì„± (ë§ˆì§„ ê³„ì‚° í¬í•¨)
        product = Product.create_from_book(book, publisher)
        self.db.add(product)

        book.is_processed = True

    self.db.commit()
```

**Product.create_from_book() ë‚´ë¶€ ë¡œì§:**
```python
# app/models/product.py ë‚´ë¶€

@classmethod
def create_from_book(cls, book: Book, publisher: Publisher):
    # 1. íŒë§¤ê°€ ê³„ì‚° (ì •ê°€ì˜ 90%)
    sale_price = int(book.list_price * BOOK_DISCOUNT_RATE)

    # 2. ë§¤ì…ê°€ ê³„ì‚°
    purchase_price = int(book.list_price * publisher.purchase_rate)

    # 3. ì¿ íŒ¡ ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
    coupang_fee = int(sale_price * COUPANG_FEE_RATE)

    # 4. ìˆœë§ˆì§„ ê³„ì‚° (ë°°ì†¡ë¹„ 2,500ì› ê°€ì •)
    net_margin = sale_price - purchase_price - coupang_fee - 2500

    # 5. ë°°ì†¡ì •ì±… ê²°ì •
    if net_margin >= FREE_SHIPPING_THRESHOLD:  # 2,000ì›
        shipping_policy = 'free'
        can_upload = True
    elif net_margin >= 0:
        shipping_policy = 'paid'
        can_upload = True
    else:
        shipping_policy = 'paid'
        can_upload = False  # ë§ˆì§„ ë§ˆì´ë„ˆìŠ¤ â†’ ë“±ë¡ ë¶ˆê°€

    return cls(
        isbn=book.isbn,
        book_id=book.id,
        sale_price=sale_price,
        purchase_price=purchase_price,
        net_margin=net_margin,
        shipping_policy=shipping_policy,
        can_upload_single=can_upload,
        status='ready' if can_upload else 'bundle_needed',
    )
```

**ë§ˆì§„ ê³„ì‚° ì˜ˆì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ˆì‹œ: ì •ê°€ 20,000ì›, ë§¤ì…ìœ¨ 70% ë„ì„œ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ì •ê°€:         20,000ì›                                      â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  íŒë§¤ê°€:       20,000 Ã— 0.9 = 18,000ì›                       â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ë§¤ì…ê°€:       20,000 Ã— 0.7 = 14,000ì›                       â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ì¿ íŒ¡ìˆ˜ìˆ˜ë£Œ:    18,000 Ã— 0.11 = 1,980ì›                       â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ìˆœë§ˆì§„:       18,000 - 14,000 - 1,980 - 2,500               â”‚
â”‚              = -480ì› (ë§ˆì´ë„ˆìŠ¤!)                            â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ê²°ê³¼:         can_upload_single = False                     â”‚
â”‚               status = 'bundle_needed'                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ˆì‹œ: ì •ê°€ 30,000ì›, ë§¤ì…ìœ¨ 65% ë„ì„œ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ì •ê°€:         30,000ì›                                      â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  íŒë§¤ê°€:       30,000 Ã— 0.9 = 27,000ì›                       â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ë§¤ì…ê°€:       30,000 Ã— 0.65 = 19,500ì›                      â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ì¿ íŒ¡ìˆ˜ìˆ˜ë£Œ:    27,000 Ã— 0.11 = 2,970ì›                       â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ìˆœë§ˆì§„:       27,000 - 19,500 - 2,970 - 2,500               â”‚
â”‚              = 2,030ì› (í”ŒëŸ¬ìŠ¤!)                             â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  ê²°ê³¼:         can_upload_single = True                      â”‚
â”‚               shipping_policy = 'free' (2,030 > 2,000)       â”‚
â”‚               status = 'ready'                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 find_gaps() ìƒì„¸ (364-432ì¤„)

```python
def find_gaps(self) -> Dict[str, Dict[str, Any]]:
    """ê³„ì •ë³„ ë¯¸ë“±ë¡ ë„ì„œ(ê°­) ë¶„ì„"""

    # ì—…ë¡œë“œ ê°€ëŠ¥í•œ ì „ì²´ ìƒí’ˆ
    all_products = self.db.query(Product).filter(
        Product.status == 'ready',
        Product.can_upload_single == True,
    ).all()

    product_isbns = {p.isbn: p for p in all_products}

    # í™œì„± WING API ê³„ì •
    accounts = self.db.query(Account).filter(
        Account.is_active == True,
        Account.wing_api_enabled == True,
    ).all()

    gaps = {}

    for account in accounts:
        # ì´ë¯¸ ë“±ë¡ëœ ISBN ì¡°íšŒ
        registered_isbns = set()
        listings = self.db.query(Listing.isbn).filter(
            Listing.account_id == account.id,
            Listing.isbn.isnot(None),
        ).all()
        for (isbn,) in listings:
            if isbn:
                registered_isbns.add(isbn)

        # ê°­ = ì „ì²´ - ì´ë¯¸ë“±ë¡
        missing_products = [
            p for isbn, p in product_isbns.items()
            if isbn not in registered_isbns
        ]

        gaps[account.account_name] = {
            "account": account,
            "registered": len(registered_isbns & set(product_isbns.keys())),
            "missing": len(missing_products),
            "products": missing_products,  # ë¯¸ë“±ë¡ Product ë¦¬ìŠ¤íŠ¸
        }

    return gaps
```

**ê°­ ë¶„ì„ ë„ì‹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Product í…Œì´ë¸” ì¡°íšŒ                          â”‚
â”‚     status='ready' AND can_upload_single=True                  â”‚
â”‚                                                                 â”‚
â”‚     ê²°ê³¼: 1,000ê°œ Product (ISBN ê¸°ì¤€)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  product_isbns = {                                              â”‚
â”‚      "9788961057851": Product1,                                 â”‚
â”‚      "9788961057868": Product2,                                 â”‚
â”‚      ...                                                        â”‚
â”‚      (1,000ê°œ)                                                  â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê° ê³„ì •ë³„ Listing ì¡°íšŒ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 007-book   â”‚         â”‚ 007-bm     â”‚           â”‚ 007-ez     â”‚
â”‚            â”‚         â”‚            â”‚           â”‚            â”‚
â”‚ Listing:   â”‚         â”‚ Listing:   â”‚           â”‚ Listing:   â”‚
â”‚ 800ê°œ ISBN â”‚         â”‚ 600ê°œ ISBN â”‚           â”‚ 500ê°œ ISBN â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                      â”‚                        â”‚
      â–¼                      â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê°­ ê³„ì‚°:    â”‚         â”‚ ê°­ ê³„ì‚°:    â”‚           â”‚ ê°­ ê³„ì‚°:    â”‚
â”‚            â”‚         â”‚            â”‚           â”‚            â”‚
â”‚ 1000 - 800 â”‚         â”‚ 1000 - 600 â”‚           â”‚ 1000 - 500 â”‚
â”‚ = 200ê°œ    â”‚         â”‚ = 400ê°œ    â”‚           â”‚ = 500ê°œ    â”‚
â”‚ ë¯¸ë“±ë¡     â”‚         â”‚ ë¯¸ë“±ë¡     â”‚           â”‚ ë¯¸ë“±ë¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 upload_to_account() ìƒì„¸ (438-564ì¤„) ğŸ”´ ìœ„í—˜!

```python
def upload_to_account(
    self,
    account: Account,
    products: List[Product],
    dry_run: bool = False,       # â† Falseë©´ ì‹¤ì œ ë“±ë¡!
    progress_callback=None,
) -> Dict[str, Any]:
    """íŠ¹ì • ê³„ì •ì— ë¯¸ë“±ë¡ ìƒí’ˆ ì—…ë¡œë“œ"""
```

**ì „ì²´ íë¦„:**
```
upload_to_account(account, products, dry_run=False)
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ì¶œê³ ì§€/ë°˜í’ˆì§€ ì½”ë“œ í™•ì¸ (460-468ì¤„)                          â”‚
â”‚                                                                 â”‚
â”‚     outbound_code = account.outbound_shipping_code              â”‚
â”‚     return_code = account.return_center_code                    â”‚
â”‚                                                                 â”‚
â”‚     if not outbound_code or not return_code:                    â”‚
â”‚         return ì‹¤íŒ¨                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. WING í´ë¼ì´ì–¸íŠ¸ ìƒì„± (470-477ì¤„)                             â”‚
â”‚                                                                 â”‚
â”‚     client = self._create_wing_client(account)                  â”‚
â”‚                                                                 â”‚
â”‚     â†’ CoupangWingClient(vendor_id, access_key, secret_key)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Uploader ìƒì„± (479ì¤„)                                        â”‚
â”‚                                                                 â”‚
â”‚     uploader = CoupangAPIUploader(client, vendor_user_id=...)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ê° ìƒí’ˆì— ëŒ€í•´ ë£¨í”„ (486-561ì¤„)                               â”‚
â”‚                                                                 â”‚
â”‚     for product in products:                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4-1. Book ì •ë³´ ì¡°íšŒ (487-491ì¤„)                                 â”‚
â”‚                                                                 â”‚
â”‚     book = query(Book).filter(id == product.book_id).first()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4-2. ìƒí’ˆ ë°ì´í„° êµ¬ì„± (493-503ì¤„)                                â”‚
â”‚                                                                 â”‚
â”‚     pd_data = {                                                 â”‚
â”‚         "product_name": book.title,                             â”‚
â”‚         "publisher": book.publisher_name,                       â”‚
â”‚         "author": book.author,                                  â”‚
â”‚         "isbn": book.isbn,                                      â”‚
â”‚         "original_price": book.list_price,                      â”‚
â”‚         "sale_price": product.sale_price,                       â”‚
â”‚         "main_image_url": book.image_url,                       â”‚
â”‚         "description": book.description,                        â”‚
â”‚         "shipping_policy": product.shipping_policy,  â† ì¤‘ìš”!    â”‚
â”‚     }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                           â–¼
        [dry_run=True]              [dry_run=False]
                â”‚                           â”‚
                â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í˜ì´ë¡œë“œë§Œ ë¹Œë“œ         â”‚   â”‚  ì‹¤ì œ API í˜¸ì¶œ (526ì¤„) ğŸ”´        â”‚
â”‚  (ì‹¤ì œ ë“±ë¡ ì•ˆ í•¨)       â”‚   â”‚                                 â”‚
â”‚                         â”‚   â”‚  res = uploader.upload_product( â”‚
â”‚  payload = uploader.    â”‚   â”‚      pd_data,                   â”‚
â”‚    build_product_payloadâ”‚   â”‚      outbound_code,             â”‚
â”‚    (pd_data, ...)       â”‚   â”‚      return_code                â”‚
â”‚                         â”‚   â”‚  )                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                 â”‚
                              â”‚  â†“                              â”‚
                              â”‚  ì¿ íŒ¡ WING API POST ìš”ì²­!        â”‚
                              â”‚  â†“                              â”‚
                              â”‚  ì¿ íŒ¡ ì„œë²„ì— ìƒí’ˆ ë“±ë¡ë¨!         â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  ë“±ë¡ ì„±ê³µ ì‹œ (527-555ì¤„)        â”‚
                              â”‚                                 â”‚
                              â”‚  listing = Listing(             â”‚
                              â”‚      account_id=account.id,     â”‚
                              â”‚      coupang_product_id=sid,    â”‚
                              â”‚      coupang_status='active',   â”‚
                              â”‚      upload_method='api',       â”‚
                              â”‚      ...                        â”‚
                              â”‚  )                              â”‚
                              â”‚  db.add(listing)                â”‚
                              â”‚  db.commit()                    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**shipping_policy ì „ë‹¬ ê²½ë¡œ:**
```
Product.shipping_policy
    â”‚
    â”‚ (find_gapsì—ì„œ Product ê°ì²´ ì „ë‹¬)
    â”‚
    â–¼
upload_to_account()
    â”‚
    â”‚ pd_data["shipping_policy"] = product.shipping_policy
    â”‚
    â–¼
uploader.upload_product(pd_data, ...)
    â”‚
    â”‚ shipping_policy = product_data.get("shipping_policy", "free")
    â”‚                                                      ^^^^^^^^
    â”‚                                                      ê¸°ë³¸ê°’!
    â–¼
build_product_payload()
    â”‚
    â”‚ if shipping_policy == "free":
    â”‚     delivery_charge_type = "FREE"
    â”‚     delivery_charge = 0
    â”‚ else:
    â”‚     delivery_charge_type = "NOT_FREE"
    â”‚     delivery_charge = 2500
    â”‚
    â–¼
ì¿ íŒ¡ APIë¡œ ì „ì†¡
```

---

## 4. coupang_api_uploader.py ì™„ì „ ë¶„ì„

### 4.1 íŒŒì¼ ì •ë³´
- **ê²½ë¡œ**: `uploaders/coupang_api_uploader.py`
- **ì¤„ ìˆ˜**: 494ì¤„
- **ì—­í• **: WING API JSON í˜ì´ë¡œë“œ ìƒì„± ë° ìƒí’ˆ ë“±ë¡

### 4.2 í´ë˜ìŠ¤ êµ¬ì¡°

```
class CoupangAPIUploader:
    â”‚
    â”œâ”€â”€ __init__(client, vendor_user_id)
    â”‚
    â”œâ”€â”€ recommend_category()      # ì¹´í…Œê³ ë¦¬ ì¶”ì²œ API í˜¸ì¶œ
    â”‚
    â”œâ”€â”€ build_product_payload()   # JSON í˜ì´ë¡œë“œ ìƒì„±
    â”‚
    â”œâ”€â”€ upload_product() ğŸ”´       # ë‹¨ì¼ ìƒí’ˆ ë“±ë¡ (ìœ„í—˜!)
    â”‚
    â”œâ”€â”€ upload_batch() ğŸ”´         # ì¼ê´„ ìƒí’ˆ ë“±ë¡ (ìœ„í—˜!)
    â”‚
    â””â”€â”€ _generate_search_tags()   # ê²€ìƒ‰ íƒœê·¸ ìƒì„±

í—¬í¼ í•¨ìˆ˜:
    â”œâ”€â”€ _build_book_notices()     # ìƒí’ˆê³ ì‹œì •ë³´ ìƒì„±
    â”œâ”€â”€ _build_book_attributes()  # í•„ìˆ˜ ì†ì„± ìƒì„±
    â””â”€â”€ _build_content_html()     # ìƒì„¸í˜ì´ì§€ HTML ìƒì„±
```

### 4.3 build_product_payload() ìƒì„¸ (76-224ì¤„)

```python
def build_product_payload(
    self,
    product_data: Dict[str, Any],
    outbound_shipping_code: str,
    return_center_code: str,
    category_code: Optional[str] = None,
    return_info: Optional[Dict] = None,
) -> Dict[str, Any]:
```

**ë°°ì†¡ë¹„ ì„¤ì • ë¡œì§ (116-122ì¤„):**
```python
# ë°°ì†¡ë¹„ ì„¤ì •
shipping_policy = product_data.get("shipping_policy", "free")  # â† ê¸°ë³¸ê°’ "free"!

if shipping_policy == "free":
    delivery_charge_type = "FREE"
    delivery_charge = 0
else:
    delivery_charge_type = "NOT_FREE"
    delivery_charge = 2500
```

**ë¬¸ì œì :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  product_data.get("shipping_policy", "free")                    â”‚
â”‚                                       ^^^^^                     â”‚
â”‚                                       ê¸°ë³¸ê°’ì´ "free"!           â”‚
â”‚                                                                 â”‚
â”‚  ë§Œì•½ product_dataì— shipping_policy í‚¤ê°€ ì—†ê±°ë‚˜                 â”‚
â”‚  ê°’ì´ Noneì´ë©´ â†’ "free"ë¡œ ì²˜ë¦¬ë¨                                 â”‚
â”‚                                                                 â”‚
â”‚  ê²°ê³¼: ë¬´ë£Œë°°ì†¡ìœ¼ë¡œ ë“±ë¡ë¨!                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í˜ì´ë¡œë“œ ì „ì²´ êµ¬ì¡°:**
```python
payload = {
    # â”€â”€â”€ ê¸°ë³¸ ì •ë³´ â”€â”€â”€
    "displayCategoryCode": 76236,           # ì¹´í…Œê³ ë¦¬ ì½”ë“œ
    "sellerProductName": "ê°œë…ì›ë¦¬ ìˆ˜í•™",    # íŒë§¤ì ìƒí’ˆëª… (100ì)
    "vendorId": "A01105984",                # ë²¤ë” ID
    "displayProductName": "ê°œë…ì›ë¦¬ ê°œë…ì›ë¦¬ ìˆ˜í•™",  # í‘œì‹œ ìƒí’ˆëª…
    "brand": "ê°œë…ì›ë¦¬",                     # ë¸Œëœë“œ
    "generalProductName": "ê°œë…ì›ë¦¬ ìˆ˜í•™",   # ì¼ë°˜ ìƒí’ˆëª…

    # â”€â”€â”€ ë°°ì†¡ ì •ë³´ â”€â”€â”€
    "deliveryMethod": "SEQUENCIAL",          # ì¼ë°˜ë°°ì†¡
    "deliveryCompanyCode": "HANJIN",         # í•œì§„íƒë°°
    "deliveryChargeType": "FREE",            # â† ë¬´ë£Œë°°ì†¡ ë¬¸ì œ!
    "deliveryCharge": 0,                     # â† ë°°ì†¡ë¹„ 0ì›!
    "freeShipOverAmount": 0,
    "deliveryChargeOnReturn": 2500,
    "remoteAreaDeliverable": "N",
    "unionDeliveryType": "UNION_DELIVERY",
    "returnCharge": 2500,

    # â”€â”€â”€ ì¶œê³ /ë°˜í’ˆ â”€â”€â”€
    "returnCenterCode": "1002509459",
    "outboundShippingPlaceCode": 24105055,
    "returnChargeName": "ë¶ì½”ë¦¬ì•„",
    "companyContactNumber": "031-917-0864",
    "returnZipCode": "10417",
    "returnAddress": "ê²½ê¸°ë„ ê³ ì–‘ì‹œ...",

    # â”€â”€â”€ íŒë§¤ ì •ë³´ â”€â”€â”€
    "saleStartedAt": "2026-02-06T00:00:00",
    "saleEndedAt": "2099-12-31T00:00:00",
    "vendorUserId": "007-book",
    "requested": True,                       # ìë™ ìŠ¹ì¸ ìš”ì²­

    # â”€â”€â”€ ìƒí’ˆ ì•„ì´í…œ â”€â”€â”€
    "items": [
        {
            "itemName": "ê°œë…ì›ë¦¬ ìˆ˜í•™",
            "originalPrice": 18000,          # ì •ê°€
            "salePrice": 16200,              # íŒë§¤ê°€
            "maximumBuyCount": 1000,
            "outboundShippingTimeDay": 1,    # D+1 ì¶œê³ 
            "unitCount": 1,
            "adultOnly": "EVERYONE",
            "taxType": "FREE",               # ë„ì„œ ë¹„ê³¼ì„¸
            "pccNeeded": False,
            "offerCondition": "NEW",
            "barcode": "9788961057851",
            "externalVendorSku": "9788961057851",
            "searchTags": ["ê°œë…ì›ë¦¬", "ìˆ˜í•™", ...],
            "images": [...],
            "notices": [...],                # ìƒí’ˆê³ ì‹œì •ë³´
            "attributes": [...],             # í•„ìˆ˜ì†ì„±
            "certifications": [...],
            "contents": [...],               # ìƒì„¸í˜ì´ì§€ HTML
        }
    ],
}
```

### 4.4 upload_product() ìƒì„¸ (226-280ì¤„) ğŸ”´ í•µì‹¬!

```python
def upload_product(self, product_data: Dict, outbound_code: str, return_code: str) -> Dict[str, Any]:
    """ë‹¨ì¼ ìƒí’ˆ API ë“±ë¡"""

    # 1. í˜ì´ë¡œë“œ ìƒì„±
    payload = self.build_product_payload(product_data, outbound_code, return_code)
    product_name = product_data.get("product_name", "")

    try:
        # 2. API í˜¸ì¶œ ğŸ”´ ì‹¤ì œ ë“±ë¡!
        result = self.client.create_product(payload)

        # 3. ì—ëŸ¬ ì²´í¬ (ì¿ íŒ¡ì€ 200ì´ì–´ë„ bodyì— ì—ëŸ¬ ê°€ëŠ¥)
        code = result.get("code", "")
        if code == "ERROR":
            msg = result.get("message", "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜")
            return {"success": False, "message": msg}

        # 4. ì„±ê³µ ì‹œ seller_product_id ì¶”ì¶œ
        data = result.get("data", "")
        if isinstance(data, dict):
            seller_product_id = str(data.get("data", ""))
        else:
            seller_product_id = str(data)

        return {
            "success": True,
            "seller_product_id": seller_product_id,
            "message": "ë“±ë¡ ì„±ê³µ",
        }

    except CoupangWingError as e:
        return {"success": False, "message": str(e)}
```

**API í˜¸ì¶œ íë¦„:**
```
upload_product(product_data, outbound_code, return_code)
        â”‚
        â–¼
build_product_payload()
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  payload = {...} (ì•½ 100ê°œ í•„ë“œ)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
self.client.create_product(payload)
        â”‚
        â”‚  â† ì—¬ê¸°ì„œ CoupangWingClient.create_product() í˜¸ì¶œ
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CoupangWingClient._request("POST", path, data=payload)        â”‚
â”‚                                                                 â”‚
â”‚  1. HMAC-SHA256 ì„œëª… ìƒì„±                                       â”‚
â”‚  2. Authorization í—¤ë” ì„¤ì •                                     â”‚
â”‚  3. requests.post() í˜¸ì¶œ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               HTTPS POST ìš”ì²­                                   â”‚
â”‚                                                                 â”‚
â”‚  URL: https://api-gateway.coupang.com                          â”‚
â”‚       /v2/providers/seller_api/apis/api/v1/marketplace/        â”‚
â”‚       seller-products                                          â”‚
â”‚                                                                 â”‚
â”‚  Headers:                                                       â”‚
â”‚    Authorization: CEA algorithm=HmacSHA256, access-key=...,    â”‚
â”‚                   signed-date=..., signature=...               â”‚
â”‚    Content-Type: application/json;charset=UTF-8                â”‚
â”‚    X-EXTENDED-TIMEOUT: 90000                                   â”‚
â”‚                                                                 â”‚
â”‚  Body: payload (JSON)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ì¿ íŒ¡ ì„œë²„ ì‘ë‹µ                                       â”‚
â”‚                                                                 â”‚
â”‚  ì„±ê³µ ì‹œ:                                                       â”‚
â”‚  {                                                              â”‚
â”‚      "code": "SUCCESS",                                         â”‚
â”‚      "data": 16026453478    â† seller_product_id                â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â”‚  ì‹¤íŒ¨ ì‹œ:                                                       â”‚
â”‚  {                                                              â”‚
â”‚      "code": "ERROR",                                           â”‚
â”‚      "message": "í•„ìˆ˜ í•„ë“œ ëˆ„ë½..."                              â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. constants.py ì™„ì „ ë¶„ì„

### 5.1 íŒŒì¼ ì •ë³´
- **ê²½ë¡œ**: `app/constants.py`
- **ì¤„ ìˆ˜**: 65ì¤„
- **ì—­í• **: ì „ì—­ ìƒìˆ˜ ë° ê¸°ë³¸ê°’ ì •ì˜

### 5.2 ë§ˆì§„ ê´€ë ¨ ìƒìˆ˜ (1-16ì¤„)

```python
# ë„ì„œì •ê°€ì œ (í•œêµ­ ë²•ë¥ )
BOOK_DISCOUNT_RATE = 0.9  # ì •ê°€ Ã— 0.9 = íŒë§¤ê°€

# ì¿ íŒ¡ ìˆ˜ìˆ˜ë£Œ
COUPANG_FEE_RATE = 0.11  # íŒë§¤ê°€ì˜ 11%

# ë°°ì†¡ë¹„
DEFAULT_SHIPPING_COST = 2000  # ê¸°ë³¸ ë°°ì†¡ë¹„ (ì›)
FREE_SHIPPING_THRESHOLD = 2000  # ë¬´ë£Œë°°ì†¡ ìˆœë§ˆì§„ ê¸°ì¤€ (ì›)

# ì¬ê³ 
DEFAULT_STOCK = 10  # ê¸°ë³¸ ì¬ê³  ìˆ˜ëŸ‰
DEFAULT_LEAD_TIME = 2  # ì¶œê³  ì†Œìš”ì¼
LOW_STOCK_THRESHOLD = 3  # ì¬ê³  ë¶€ì¡± ê¸°ì¤€ (ì´í•˜ë©´ ë¦¬í•„)
```

**ìƒìˆ˜ ì‚¬ìš©ì²˜:**
```
BOOK_DISCOUNT_RATE (0.9)
    â”‚
    â””â”€â–¶ Product.create_from_book()ì—ì„œ íŒë§¤ê°€ ê³„ì‚°
        sale_price = list_price Ã— 0.9

COUPANG_FEE_RATE (0.11)
    â”‚
    â””â”€â–¶ Product.create_from_book()ì—ì„œ ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
        fee = sale_price Ã— 0.11

FREE_SHIPPING_THRESHOLD (2000)
    â”‚
    â””â”€â–¶ Product.create_from_book()ì—ì„œ ë°°ì†¡ì •ì±… ê²°ì •
        if net_margin >= 2000:
            shipping_policy = "free"
```

### 5.3 BOOK_PRODUCT_DEFAULTS (22-41ì¤„)

```python
# ì¿ íŒ¡ WING API - ë„ì„œ ìƒí’ˆ ë“±ë¡ ê¸°ë³¸ê°’ (PDF ê°€ì´ë“œ ê¸°ë°˜)
BOOK_PRODUCT_DEFAULTS = {
    "deliveryMethod": "SEQUENCIAL",              # ì¼ë°˜ë°°ì†¡
    "deliveryChargeType": "NOT_FREE",            # â† 2026-02-06 ìˆ˜ì •ë¨!
    "deliveryCharge": 2500,                       # â† 2026-02-06 ìˆ˜ì •ë¨!
    "freeShipOverAmount": 0,
    "deliveryChargeOnReturn": 2500,
    "unionDeliveryType": "UNION_DELIVERY",
    "remoteAreaDeliverable": "N",
    "returnCharge": 2500,
    "requested": True,                           # ìë™ íŒë§¤ìŠ¹ì¸ ìš”ì²­
    "adultOnly": "EVERYONE",
    "taxType": "FREE",                           # ë„ì„œ ë¹„ê³¼ì„¸
    "parallelImported": "NOT_PARALLEL_IMPORTED",
    "overseasPurchased": "NOT_OVERSEAS_PURCHASED",
    "pccNeeded": False,                          # ë¶ˆë¦¬ì–¸ (ë¬¸ìì—´ ì•„ë‹˜)
    "offerCondition": "NEW",
    "outboundShippingTimeDay": 1,                # ì •ìˆ˜ (D+1 ì¶œê³ )
    "maximumBuyForPerson": 0,                    # ì •ìˆ˜ (ë¬´ì œí•œ)
}
```

**ë³€ê²½ ì „í›„ ë¹„êµ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë³€ê²½ ì „ (ì‚¬ê³  ì›ì¸)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "deliveryChargeType": "FREE",      â† ë¬´ë£Œë°°ì†¡!                 â”‚
â”‚  "deliveryCharge": 0,               â† ë°°ì†¡ë¹„ 0ì›!               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë³€ê²½ í›„ (2026-02-06)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "deliveryChargeType": "NOT_FREE",  â† ìœ ë£Œë°°ì†¡                  â”‚
â”‚  "deliveryCharge": 2500,            â† ë°°ì†¡ë¹„ 2,500ì›            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ì˜: ì´ ê°’ì€ ì§ì ‘ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ!**
```
BOOK_PRODUCT_DEFAULTS["deliveryChargeType"]
    â”‚
    â”‚  build_product_payload()ì—ì„œëŠ” ì‚¬ìš© ì•ˆ í•¨!
    â”‚
    â”‚  ëŒ€ì‹ :
    â”‚  shipping_policy = product_data.get("shipping_policy", "free")
    â”‚  if shipping_policy == "free":
    â”‚      delivery_charge_type = "FREE"
    â”‚
    â””â”€â–¶ Product.shipping_policy ê°’ì´ ìµœì¢… ê²°ì •
```

---

## 6. ì‚¬ê³  ë°œìƒ ë©”ì»¤ë‹ˆì¦˜ ìƒì„¸

### 6.1 íƒ€ì„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2026-02-05 12:12:15                                           â”‚
â”‚                                                                 â”‚
â”‚  ëˆ„êµ°ê°€ê°€ (ë‹¤ë¥¸ Claude ì„¸ì…˜ ë˜ëŠ” ì§ì ‘) ë‹¤ìŒì„ ì‹¤í–‰:              â”‚
â”‚                                                                 â”‚
â”‚  sync = FranchiseSync()                                        â”‚
â”‚  sync.upload_to_account(                                       â”‚
â”‚      account=account_007book,                                  â”‚
â”‚      products=missing_products,   # 387ê°œ                      â”‚
â”‚      dry_run=False               # â† ì‹¤ì œ ë“±ë¡!                â”‚
â”‚  )                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚  12:12:15 ~ 12:17:25 (ì•½ 5ë¶„)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  387ê°œ ìƒí’ˆì´ ì¿ íŒ¡ì— ë“±ë¡ë¨                                      â”‚
â”‚                                                                 â”‚
â”‚  ê° ìƒí’ˆì˜ ë°°ì†¡ ì„¤ì •:                                            â”‚
â”‚    - Product.shipping_policy = "free" (ë§ˆì§„ ê³„ì‚° ê²°ê³¼)          â”‚
â”‚    - build_product_payload()ì—ì„œ "FREE"ë¡œ ì„¤ì •                  â”‚
â”‚    - ì¿ íŒ¡ì— ë¬´ë£Œë°°ì†¡ìœ¼ë¡œ ë“±ë¡ë¨!                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Listing ë ˆì½”ë“œ ìƒì„±                                            â”‚
â”‚                                                                 â”‚
â”‚  upload_method = 'api'   â† ì´ ê°’ìœ¼ë¡œ API ë“±ë¡ ì‹ë³„              â”‚
â”‚  uploaded_at = 12:12:15...                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì´í›„:                                                          â”‚
â”‚                                                                 â”‚
â”‚  - ìˆ˜ëŠ¥íŠ¹ê°• ë“± ìƒí’ˆì— ì£¼ë¬¸ ë“¤ì–´ì˜´                                â”‚
â”‚  - ë‹¨ê¶Œ 77ê±´ì´ ë¬´ë£Œë°°ì†¡ìœ¼ë¡œ ì²˜ë¦¬ë¨                               â”‚
â”‚  - ì‚¬ìš©ìê°€ ì†í•´ ë°œìƒ ì¸ì§€                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ë°°ì†¡ë¹„ ê²°ì • ê²½ë¡œ ì¶”ì 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Book ìƒì„± ì‹œ (í¬ë¡¤ë§)                                       â”‚
â”‚                                                                 â”‚
â”‚     book.list_price = 18000  (ì •ê°€)                             â”‚
â”‚     book.publisher_id â†’ Publisher.purchase_rate = 0.65          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Product ìƒì„± ì‹œ (ë§ˆì§„ ë¶„ì„)                                  â”‚
â”‚                                                                 â”‚
â”‚     sale_price = 18000 Ã— 0.9 = 16200                            â”‚
â”‚     purchase = 18000 Ã— 0.65 = 11700                             â”‚
â”‚     fee = 16200 Ã— 0.11 = 1782                                   â”‚
â”‚     margin = 16200 - 11700 - 1782 - 2500 = 218                  â”‚
â”‚                                                                 â”‚
â”‚     218 < 2000 ì´ë¯€ë¡œ:                                          â”‚
â”‚     shipping_policy = "paid"                                   â”‚
â”‚                                                                 â”‚
â”‚  ... ê·¸ëŸ°ë° ì¼ë¶€ ìƒí’ˆì€:                                         â”‚
â”‚     margin > 2000 ì´ë¯€ë¡œ:                                       â”‚
â”‚     shipping_policy = "free"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. upload_to_account()ì—ì„œ                                     â”‚
â”‚                                                                 â”‚
â”‚     pd_data["shipping_policy"] = product.shipping_policy        â”‚
â”‚                                  (= "free" ë˜ëŠ” "paid")        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. build_product_payload()ì—ì„œ                                 â”‚
â”‚                                                                 â”‚
â”‚     shipping_policy = product_data.get("shipping_policy", "free")
â”‚                                                                 â”‚
â”‚     if shipping_policy == "free":                               â”‚
â”‚         delivery_charge_type = "FREE"  â† ë¬´ë£Œë°°ì†¡               â”‚
â”‚         delivery_charge = 0                                     â”‚
â”‚     else:                                                       â”‚
â”‚         delivery_charge_type = "NOT_FREE"                       â”‚
â”‚         delivery_charge = 2500                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ì¿ íŒ¡ APIë¡œ ì „ì†¡                                             â”‚
â”‚                                                                 â”‚
â”‚     payload["deliveryChargeType"] = "FREE"                      â”‚
â”‚     payload["deliveryCharge"] = 0                               â”‚
â”‚                                                                 â”‚
â”‚     â†’ ì¿ íŒ¡ ì„œë²„ì— ë¬´ë£Œë°°ì†¡ìœ¼ë¡œ ë“±ë¡ë¨!                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. í˜„ì¬ ìƒíƒœ ë° ì•ˆì „ ì¡°ì¹˜

### 7.1 ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© | ìƒíƒœ |
|------|----------|------|
| `auto_crawl.py` | Step 4 ìë™ ë“±ë¡ ì œê±° | âœ… ì™„ë£Œ |
| `constants.py` | ë°°ì†¡ë¹„ ê¸°ë³¸ê°’ ë³€ê²½ | âœ… ì™„ë£Œ |
| `coupang_wing_client.py` | delete/stop ë©”ì„œë“œ ì¶”ê°€ | âœ… ì™„ë£Œ |

### 7.2 ìë™ ì—…ë¡œë“œ ì°¨ë‹¨ í™•ì¸

```python
# auto_crawl.py 126-131ì¤„ (í˜„ì¬ ìƒíƒœ)

# Step 4: ìë™ ë“±ë¡ ë¹„í™œì„±í™” (2026-02-06)
# âš ï¸ ìë™ ì—…ë¡œë“œ ê¸°ëŠ¥ ì œê±° - ìˆ˜ë™ ê²€í†  í›„ ë“±ë¡ í•„ìš”
upload_results = {}
total_uploaded = 0
total_failed = 0
logger.info("[4/5] ìë™ ë“±ë¡ ë¹„í™œì„±í™”ë¨ â€” ìˆ˜ë™ ê²€í†  í•„ìš” (ë¯¸ë“±ë¡ %dê°œ)", total_missing)
```

### 7.3 ì”ì¡´ ìœ„í—˜

```
âš ï¸ ì—¬ì „íˆ ìœ„í—˜í•œ ì½”ë“œ (ì§ì ‘ í˜¸ì¶œ ì‹œ):

1. franchise_sync.py
   - sync.upload_to_account(dry_run=False)
   - sync.sync_all(dry_run=False)

2. coupang_api_uploader.py
   - uploader.upload_product()
   - uploader.upload_batch()

ì´ í•¨ìˆ˜ë“¤ì„ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ì—¬ì „íˆ ì¿ íŒ¡ì— ë“±ë¡ë¨!
```

### 7.4 ì•ˆì „í•œ ì‚¬ìš©ë²•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì•ˆì „í•œ ì‘ì—… ìˆœì„œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ê°­ ë¶„ì„ë§Œ ì‹¤í–‰:
   python scripts/franchise_sync.py --gaps-only

2. ëŒ€ì‹œë³´ë“œì—ì„œ ëª©ë¡ í™•ì¸:
   - ì‹ ê·œ ë“±ë¡ ë©”ë‰´
   - ë°°ì†¡ë¹„, ê°€ê²©, ë§ˆì§„ ê²€í† 

3. ìˆ˜ë™ ë“±ë¡ (ì„ íƒ):
   - CSV ë‹¤ìš´ë¡œë“œ â†’ ì…€ëŸ¬ì„¼í„° ì—…ë¡œë“œ
   - ë˜ëŠ” ê°œë³„ ìƒí’ˆ ì„ íƒ ë“±ë¡ (ì¶”í›„ êµ¬í˜„)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ê¸ˆì§€ëœ ì‘ì—…                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ python scripts/franchise_sync.py (--gaps-only ì—†ì´)
âŒ sync.sync_all(dry_run=False)
âŒ sync.upload_to_account(dry_run=False)
âŒ auto_crawl.py Step 4 ì£¼ì„ í•´ì œ
```

---

## 8. ê´€ë ¨ ë¬¸ì„œ

- [[íŒŒì¼-êµ¬ì¡°]] - ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°
- [[WING-API-ì—°ë™]] - API ìƒì„¸ ìŠ¤í™
- [[DB-ìŠ¤í‚¤ë§ˆ]] - í…Œì´ë¸” êµ¬ì¡°
