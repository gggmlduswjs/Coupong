# 노출 전략 대시보드

#feature #대시보드 #광고 #노출최적화

**상태:** ✅ 완료
**구현 파일:** `dashboard.py`, `app/services/exposure_strategy.py`

---

## 개요

도서정가제로 가격 경쟁이 불가능한 상황에서, 쿠팡 알고리즘(판매 속도, 전환율, 배송 유형, 재고 상태)에 최적화하여 상품 노출을 극대화하기 위한 전략 대시보드.

## 구현 파일

| 파일 | 역할 |
|------|------|
| `app/models/ad_performance.py` | 광고 성과 상세 모델 (ad_performances 테이블) |
| `app/models/__init__.py` | AdPerformance import 추가 |
| `scripts/sync_ad_performance.py` | 광고 보고서 Excel 파서 (한글→영문 컬럼 매핑, 유형 자동감지) |
| `app/services/exposure_strategy.py` | 스코어링 엔진 + 액션아이템 + 인사이트 생성 |
| `dashboard.py` | "노출 전략" 페이지 UI |

## 핵심 로직

### 4요소 가중평균 스코어링

| 요소 | 가중치 | 데이터 소스 | 점수 기준 |
|------|--------|-------------|-----------|
| 판매 속도 | 35% | revenue_history | 판매량 백분위 + 성장률 |
| 광고 효율 | 25% | ad_performances | ROAS 기반 (300%+=90점, 100%=40점) |
| 재고 건강도 | 20% | listings.stock_quantity | 10+=100, 5-9=70, 1-4=30, 0=0 |
| 배송 경쟁력 | 20% | listings.delivery_charge_type | FREE=100, CONDITIONAL=70, NOT_FREE=30 |

### 등급 체계

- **A** (80+): 최적 상태
- **B** (60-79): 양호
- **C** (40-59): 개선 필요
- **D** (20-39): 주의 필요
- **F** (0-19): 긴급 조치 필요

### 액션 아이템 분류

- 🔴 **긴급**: 품절, 재고 1-3개+판매중, 매출 -50% 급감
- 🟡 **주의**: ROAS<100%, 재고 4-5개, 유료배송
- 🟢 **기회**: 매출 +30% 성장, ROAS 300%+, 광고 없이 매출 발생

### 대시보드 구조

1. **KPI 카드 5개**: 활성 상품, 평균 점수, 총 광고비, 평균 ROAS, 재고 경고
2. **인사이트**: 자연어 분석 요약 (매출 트렌드, 재고 현황, 광고 효율)
3. **탭 4개**:
   - 상품 스코어보드 (등급별 색상, 정렬, CSV 다운로드)
   - 광고 성과 (Excel 업로드, 상품/키워드 랭킹)
   - 액션 아이템 (우선순위별 그룹)
   - 기간 비교 (이번 vs 이전 기간, 등급 분포 차트)

## 관련 문서

- [[마진-배송비-계산-공식]] - 배송 정책 결정 로직
