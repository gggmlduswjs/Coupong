# 수동 상품 등록

#feature #dashboard #registration

**상태:** ✅ 완료
**구현 파일:** `dashboard.py` (수동 등록 페이지)

---

## 개요
DB에 없는 상품도 직접 정보를 입력하여 WING API 활성 계정 전체에 한번에 등록할 수 있는 대시보드 페이지.

## 핵심 기능

### 1. ISBN 자동입력
- ISBN 입력 → "조회" 버튼
- 1순위: DB `books` 테이블 검색
- 2순위: 알라딘 API (`search_by_isbn`) 검색
- 결과를 session_state에 저장 → 폼 필드 자동 채움

### 2. 상품 정보 폼
| 필드 | 타입 | 필수 |
|------|------|------|
| 상품명 | text_input | ✅ |
| ISBN | text_input | ✅ |
| 저자 | text_input | |
| 출판사 | text_input | |
| 정가 | number_input | ✅ |
| 판매가 | number_input (정가×0.9 기본) | ✅ |
| 배송비 | radio (무료/유료) | |
| 이미지URL | text_input + 미리보기 | |
| 설명 | text_area | |
| 카테고리코드 | text_input (기본 76236) | |

### 3. 카테고리 추천
- "추천 API 조회" 버튼 → `CoupangAPIUploader.recommend_category()` 호출
- 결과를 카테고리 코드 필드에 반영

### 4. 멀티 계정 선택
- WING API 활성 계정 전체 표시 (vendor_id + 출고지/반품지 코드)
- "전체 선택" 체크박스 + 개별 체크박스

### 5. 페이로드 미리보기
- expander 내 JSON 표시
- 첫 번째 선택 계정 기준 `build_product_payload()` 호출

### 6. 멀티 계정 동시 등록
- 선택된 계정 순회하며 `upload_product()` 호출
- 성공 시 `listings` 테이블에 INSERT (upload_method='api')
- 결과를 성공/실패 테이블로 표시

## 재사용 코드
- `create_wing_client(account_row)` — dashboard.py:82
- `CoupangAPIUploader` — uploaders/coupang_api_uploader.py
- `AladinAPICrawler.search_by_isbn()` — crawlers/aladin_api_crawler.py
- `query_df()` — dashboard.py:54

## 관련 문서
- [[신규-등록-승인-흐름]] - 기존 등록 흐름 (DB 상품만)
