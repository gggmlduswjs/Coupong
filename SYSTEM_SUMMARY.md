# 쿠팡 도서 판매 자동화 시스템 - 전체 요약

## 🎯 시스템 개요

**목적:** 5개 쿠팡 계정으로 교재 판매를 자동화하고 성과를 분석하는 올인원 시스템

**핵심 기능:**
1. ✅ 24개 출판사 최신 도서 자동 검색
2. ✅ 쿠팡 공식 템플릿 CSV 자동 생성 (5개 계정)
3. ✅ 무료배송 기준 자동 체크
4. ✅ 매입률 기반 수익 계산
5. ⏳ 판매 데이터 분석 (노출/전환율)
6. ⏳ 주간 액션 플랜 자동 생성

---

## 📦 완성된 기능

### 1. 출판사별 자동 검색 시스템

**파일:**
- `config/publishers.py` - 24개 출판사 설정
- `scripts/auto_search_publishers.py` - 대화형 검색
- `scripts/scheduled_auto_update.py` - 완전 자동 검색

**기능:**
- 알라딘 API 연동
- 출판사별 매입률 관리 (40%~73%)
- 무료배송 기준 자동 체크
- 최신도서 필터링 (출간일 기준)
- 가격 범위 필터링
- 중복 자동 제거

**취급 출판사 (24개):**
```
마린북스, 아카데미소프트, 렉스미디어, 해람북스 (40%)
크라운, 영진 (55%)
이퓨쳐, 사회평론, 길벗, 아티오, 이지스퍼블리싱 (60%)
개념원리, 이투스, 비상교육, 능률교육, 씨톡, 지학사,
수경출판사, 쏠티북스, 마더텅, 한빛미디어 (65%)
동아 (67%)
좋은책신사고 (70%)
EBS (73%)
```

---

### 2. CSV 생성 시스템

**파일:**
- `uploaders/coupang_csv_generator.py`

**기능:**
- 쿠팡 공식 66컬럼 템플릿 지원
- 5개 계정별 자동 분배
- 도서 전용 필드 자동 채움
- ISBN 바코드 자동 매핑
- 상품고시정보 자동 생성

**출력:**
```
data/uploads/
├── account_1_20260205_120000.csv
├── account_2_20260205_120000.csv
├── account_3_20260205_120000.csv
├── account_4_20260205_120000.csv
└── account_5_20260205_120000.csv
```

---

### 3. 데이터베이스 시스템

**파일:**
- `app/database.py`
- `app/models/*.py` (7개 모델)

**테이블:**
1. `accounts` - 5개 계정 정보 (암호화)
2. `kyobo_products` - 수집된 도서 데이터
3. `products` - 상품 마스터
4. `listings` - 계정별 판매 현황
5. `sales` - 일일 판매 데이터
6. `analysis_results` - 분석 결과
7. `tasks` - 작업 로그

---

### 4. 계정 관리 시스템

**파일:**
- `app/utils/encryption.py` - 비밀번호 암호화
- `scripts/register_accounts.py` - 계정 등록

**등록된 계정 (5개):**
```
007-book, 007-ez, 007-bm, 002-bm, big6ceo
```

**보안:**
- Fernet 암호화
- .env 파일 Git 제외
- 암호화 키 로컬 저장

---

### 5. 알라딘 API 연동

**파일:**
- `crawlers/aladin_api_crawler.py`
- `ALADIN_API_GUIDE.md`

**기능:**
- 키워드 검색 (ItemSearch)
- ISBN 검색 (ItemLookUp)
- 최대 일 5,000건 지원
- 고화질 표지 이미지
- 상세 도서 정보

---

## 📋 워크플로우

### 일일 자동 업데이트

```
1. 스케줄러 실행 (오전 9시)
   ↓
2. 알라딘 API 검색 (24개 출판사)
   ↓
3. 필터링
   - 최신도서 (최근 180일)
   - 가격 범위 (5,000~100,000원)
   - 무료배송 기준 충족
   ↓
4. DB 저장 (중복 제거)
   ↓
5. CSV 생성 (5개 계정)
   ↓
6. 로그 저장
   ↓
7. 완료! (수동 업로드)
```

---

## 🚀 사용 방법

### 초기 설정 (1회)

```bash
# 1. 알라딘 TTBKey 발급
https://www.aladin.co.kr/ttb/wblog_manage.aspx

# 2. .env 파일에 키 입력
ALADIN_TTB_KEY=your_key_here

# 3. 데이터베이스 초기화
python scripts/init_db.py

# 4. 계정 등록
python scripts/register_accounts.py
```

### 일상 사용

#### 방법 1: 수동 검색 (대화형)

```bash
python scripts/auto_search_publishers.py
```

- 출판사 선택 가능
- 결과 미리보기
- 확인 후 저장

#### 방법 2: 자동 검색 (스케줄링)

```bash
# 직접 실행
python scripts/scheduled_auto_update.py

# 또는 배치 파일
scripts/run_auto_update.bat

# Windows 작업 스케줄러 등록
작업 스케줄러 → 매일 오전 9시 실행
```

#### 방법 3: 수동 입력

```bash
python scripts/input_books.py
```

- ISBN/제목/가격 직접 입력
- 엑셀 복사/붙여넣기 지원

---

## 💰 수익 계산 예시

### 케이스 1: 개념원리 수학 (정가 15,000원)

```
정가:      15,000원
판매가:    13,500원 (정가의 90%)
매입가:     5,250원 (정가의 35%, 매입률 65%)
쿠팡수수료: 1,350원 (판매가의 10%)
───────────────────────────────
순수익:     6,900원 (판매가의 51%)
```

### 케이스 2: 길벗 IT책 (정가 30,000원)

```
정가:      30,000원
판매가:    27,000원
매입가:    12,000원 (매입률 60%)
쿠팡수수료: 2,700원
───────────────────────────────
순수익:    12,300원 (46%)
```

### 케이스 3: EBS 교재 (정가 10,000원)

```
정가:      10,000원
판매가:     9,000원
매입가:     2,700원 (매입률 73%)
쿠팡수수료:   900원
───────────────────────────────
순수익:     5,400원 (60%)
```

---

## 📊 예상 성과

### 일일 자동 검색

- 출판사: 24개
- 출판사당: 20개 검색
- 신규 등록: 약 40개/일 (중복 제외 후)

### 월간 예상

- 신규 등록: 약 1,200개
- 계정당: 약 240개
- 판매 전환율: 5% (보수적)
- 월 판매: 약 60권
- 권당 평균 수익: 8,000원
- **월 예상 수익: 480,000원**

### 연간 예상

- **연 예상 수익: 5,760,000원**
- 투자 시간: 주 1시간 (수동 업로드)

---

## 📁 프로젝트 구조

```
Coupong/
├── app/
│   ├── models/          # 7개 데이터 모델
│   ├── utils/           # 암호화 등 유틸리티
│   ├── config.py        # 설정
│   └── database.py      # DB 연결
│
├── config/
│   └── publishers.py    # 24개 출판사 설정 ⭐
│
├── crawlers/
│   └── aladin_api_crawler.py  # 알라딘 API ⭐
│
├── uploaders/
│   └── coupang_csv_generator.py  # CSV 생성 ⭐
│
├── scripts/
│   ├── auto_search_publishers.py     # 대화형 검색 ⭐
│   ├── scheduled_auto_update.py      # 자동 검색 ⭐
│   ├── input_books.py                # 수동 입력
│   ├── register_accounts.py          # 계정 등록
│   ├── init_db.py                    # DB 초기화
│   └── run_auto_update.bat           # 배치 파일
│
├── data/
│   └── uploads/         # CSV 출력 폴더
│
├── logs/                # 로그 파일
│
├── .env                 # 환경변수 (계정, 키)
├── QUICK_START.md       # 빠른 시작 ⭐
├── AUTO_UPDATE_GUIDE.md # 자동화 가이드 ⭐
├── ALADIN_API_GUIDE.md  # API 가이드
└── ARCHITECTURE.md      # 시스템 설계
```

---

## ⏳ 미완성 기능 (추후 개발)

### 1. 판매 분석 엔진
- 노출 vs 전환 문제 구분
- 저노출 상품 자동 감지
- 저전환 상품 자동 감지
- 원인 분석 (가격/카테고리/키워드)

### 2. Streamlit 대시보드
- 오늘의 할 일 자동 생성
- 판매 현황 시각화
- 계정별 성과 비교
- 출판사별 성과 비교

### 3. 주간 리포트
- 매주 월요일 자동 생성
- 액션 플랜 제시
- 가격 조정 제안
- 키워드 최적화 제안

### 4. 자동 업로드
- Playwright 자동화
- 쿠팡 로그인
- CSV 파일 업로드
- 완전 무인 운영

---

## 🎯 현재 상태

### ✅ 완료된 것
1. 데이터베이스 설계 및 구축
2. 계정 관리 시스템 (5개 계정 암호화)
3. 알라딘 API 연동
4. 24개 출판사 관리 시스템
5. 출판사별 자동 검색
6. 무료배송 기준 자동 체크
7. 쿠팡 CSV 생성 (66컬럼 공식 템플릿)
8. 로깅 시스템
9. 스케줄링 준비 완료

### 🚀 바로 사용 가능
```bash
# 1. TTBKey 발급 (1분)
# 2. .env에 키 입력 (30초)
# 3. 실행
python scripts/auto_search_publishers.py

# 4. data/uploads/ 폴더의 CSV를 쿠팡에 업로드
```

### ⏳ 추후 개발 예정
- 판매 분석 엔진
- Streamlit 대시보드
- 주간 리포트 자동 생성
- 쿠팡 자동 업로드

---

## 📚 문서 가이드

### 처음 사용하는 경우
1. **QUICK_START.md** - 5분 안에 시작
2. **AUTO_UPDATE_GUIDE.md** - 자동화 설정
3. **ALADIN_API_GUIDE.md** - API 사용법

### 시스템 이해하려면
1. **ARCHITECTURE.md** - 전체 설계
2. **이 문서 (SYSTEM_SUMMARY.md)** - 전체 요약

### 문제 해결
1. **AUTO_UPDATE_GUIDE.md** - 트러블슈팅
2. **logs/** 폴더 - 로그 파일 확인

---

## 🎉 마치며

이 시스템은 **교재 판매의 80% 작업을 자동화**합니다.

### 수동으로 해야 할 것 (주 1시간)
- CSV 파일 쿠팡 업로드
- 판매 현황 간단 확인

### 자동으로 되는 것
- 최신 도서 검색
- 출판사 필터링
- 무료배송 체크
- DB 저장
- CSV 생성
- 로그 기록

**시간당 가치:**
- 자동화 전: 1일 2시간 → 월 60시간
- 자동화 후: 주 1시간 → 월 4시간
- **절약 시간: 월 56시간**

---

## 🚀 지금 바로 시작하세요!

```bash
# 1. TTBKey 발급
https://www.aladin.co.kr/ttb/wblog_manage.aspx

# 2. .env 설정
ALADIN_TTB_KEY=your_key_here

# 3. 실행!
python scripts/auto_search_publishers.py
```

**행복한 자동 판매 되세요! 🎉**
